<!DOCTYPE html>
<html lang="en" class="dark">
    {% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <script src="{% static 'static/tailwin.js'%}"></script>
    <script src="{% static 'static/tailwin plugin.js'%}"></script>
    <script src="{% static 'static/main.js'%}"></script>
    
<link rel="shortcut icon" href="{{site.logo.url}}" type="image/x-icon">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  
    <script src="{% static 'static/app.js'%}"></script>
    <script src="{% static 'static/index.js'%}"></script>
    <link rel="stylesheet" href="{% static 'css/tailwun.css'%}">
<script>
    let hi = location.host;
let pro = location.protocol;

function Login(oncline, type) {
    const email = document.querySelector('#email');
    const username = document.querySelector('#username');
    const password = document.querySelector('#password');
    const csrf = document.querySelector('#csrf');
    const textbtn = document.querySelector('#textbtn');
    const errormessage = document.querySelector('#errormessage');
    const pinbtn = document.querySelector('#pinbtn');
    const btn = document.querySelector(oncline); // ðŸ‘ˆ get button element
    let code = null;

    if (document.querySelector('#code')) {
        code = document.querySelector('#code');
    }

    if (type == "login") {
        btn.addEventListener('click', () => {
            textbtn.classList.toggle('hidden');
            pinbtn.classList.toggle('hidden');
            btn.disabled = true; // ðŸ‘ˆ disable button

            if (email.value !== "" && username.value !== "" && password.value !== "") {
                fetch(`${pro}//${hi}/api/`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrf.value
                    },
                    body: JSON.stringify({
                        username: username.value,
                        email: email.value,
                        password: password.value,
                    })
                })
                    .then(res => res.json())
                    .then((e) => {
                        if (e.error) {
                            errormessage.innerHTML = e.error;
                            if (document.querySelector('#errormessagecon')) {
                                document.querySelector('#errormessagecon').classList.remove('hidden');
                            }
                        } else if (e.super) {
                            location.href = `/Admin-Control/${e.super}/`;
                        } else if (e.user) {
                            location.href = `/dashboard/${e.user}/`;
                        }
                    })
                    .catch(err => alert(err, 'error'))
                    .finally(() => {
                        textbtn.classList.toggle('hidden');
                        pinbtn.classList.toggle('hidden');
                        btn.disabled = false; // ðŸ‘ˆ re-enable button
                    });
            } else {
                errormessage.innerHTML = "Input Can't be Empty";
                if (document.querySelector('#errormessagecon')) {
                    document.querySelector('#errormessagecon').classList.remove('hidden');
                }
                textbtn.classList.toggle('hidden');
                pinbtn.classList.toggle('hidden');
                btn.disabled = false; // ðŸ‘ˆ re-enable button
            }
        });
    }

    if (type == "register") {
        btn.addEventListener('click', () => {
            textbtn.classList.toggle('hidden');
            pinbtn.classList.toggle('hidden');
            btn.disabled = true; // ðŸ‘ˆ disable button

            if (email.value !== "" && username.value !== "" && password.value !== "") {
                fetch(`${pro}//${hi}/api/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrf.value
                    },
                    body: JSON.stringify({
                        username: username.value,
                        email: email.value,
                        password: password.value,
                        code: code ? code.value : null,
                    })
                })
                    .then(res => res.json())
                    .then((e) => {
                        if (e.error) {
                            errormessage.innerHTML = e.error;
                            if (document.querySelector('#errormessagecon')) {
                                document.querySelector('#errormessagecon').classList.remove('hidden');
                            }
                        } else if (e.user) {
                            location.href = `/dashboard/${e.user}/`;
                        }
                    })
                    .catch(err => alert(err, 'error'))
                    .finally(() => {
                        textbtn.classList.toggle('hidden');
                        pinbtn.classList.toggle('hidden');
                        btn.disabled = false; // ðŸ‘ˆ re-enable button
                    });
            } else {
                errormessage.innerHTML = "Input Can't be Empty";
                if (document.querySelector('#errormessagecon')) {
                    document.querySelector('#errormessagecon').classList.remove('hidden');
                }
                textbtn.classList.toggle('hidden');
                pinbtn.classList.toggle('hidden');
                btn.disabled = false; // ðŸ‘ˆ re-enable button
            }
        });
    }
}

if (document.querySelector('#disclosed')) {
    document.querySelector('#disclosed').addEventListener('click', () => {
        document.querySelector('#errormessagecon').classList.add('hidden');
    });
}

</script>

</head>
<body  class="dark:bg-black bg-white">
    



    {% include "./perloaded.html" %}
    
    {% include "./alerts.html" %}



    <input type="hidden" class="hidden" class="hidden" value="{{csrf_token}}" name="" id="csrf">
  


<section style=" background:  url('https://img.freepik.com/free-photo/elevated-view-finance-word-with-graph-white-background_23-2147892168.jpg?ga=GA1.1.2105513684.1762248911&semt=ais_hybrid&w=740&q=80');background-position: right; background-size: cover; background-repeat: no-repeat;  " id="register" class="py-10 bg-[white] sm:py-16 lg:py-24 h-fit min-h-screen dark:bg-black " >
    <div class="px-4 mx-auto max-w-7xl sm:px-6 lg:px-8 ">
        <div class="max-w-2xl mx-auto   flex flex-col text-center justify-center items-center">
            <img height="90" width="90"  class="mx-auto" src="{{site.logo}}" alt="{{site.name}}">
            <p class="max-w-xl mx-auto mt-4 text-base leading-relaxed text-gray-600 dark:text-white">Register!! To Get Started</p>
        </div>

        <div class="relative max-w-md mx-auto mt-8 md:mt-16">
            <div class="overflow-hidden bg-white rounded-md shadow-md">
                <div class="px-4 py-6 sm:px-8 sm:py-7 h-fit">
                        <div class="h-fit w-full">
                            <div >
                                <label for="" class="text-base font-medium text-gray-900"> Username </label>
                                <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
                                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                                        </svg>
                                    </div>

                                    <input
                                        type="text"
                                        name=""
                                        id="username"
                                        placeholder="Enter Username to get started"
                                        class="block w-full py-4 pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 bg-white border border-gray-200 rounded-md focus:outline-none focus:border-blue-600 caret-blue-600"
                                    />
                                </div>
                            </div>
                            <div>
                                <label for="" class="text-base font-medium text-gray-900"> Email  </label>
                                <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
                                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                                        </svg>
                                    </div>

                                    <input
                                        type="email"
                                        name=""
                                        id="email"
                                        placeholder="Enter email to get started"
                                        class="block w-full py-4 pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 bg-white border border-gray-200 rounded-md focus:outline-none focus:border-blue-600 caret-blue-600"
                                    />
                                </div>
                            </div>
                            <div>
                                <div class="flex items-center justify-between">
                                    <label for="" class="text-base font-medium text-gray-900"> Password </label>

                                </div>
                                <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
                                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"
                                            />
                                        </svg>
                                    </div>

                                    <input
                                        type="password"
                                        name=""
                                        id="password"
                                        placeholder="Password"
                                        class="block w-full py-4 pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 bg-white border border-gray-200 rounded-md focus:outline-none focus:border-blue-600 caret-blue-600"
                                    />
                                </div>
                            </div>
                            <div>
                          
                                <div class="mt-3.5 relative text-gray-400 focus-within:text-gray-600">
                                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"
                                            />
                                        </svg>
                                    </div>

                                    <input
                                        type="text"
                                        name=""
                                        id="code"
                                        placeholder="Referral Code (option)"
                                        class="block w-full py-4 pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 bg-white border border-gray-200 rounded-md focus:outline-none focus:border-blue-600 caret-blue-600"
                                    />
                                </div>
                            </div>
                            <h1 class="error"></h1>
                            <button onclick="Login('#submits', 'register')"  id="submits" class="mt-8 w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 flex items-center text-center justify-center"><b class="" id="textbtn">Register your account</b> <p id="pinbtn" class="bg-white w-6 h-6 rounded-full animate-ping hidden"></p>  </button>
                        
                          
                            
                           

                           

                            <div class="text-center">
                                <p class="text-base text-gray-600">Already have an account? <a href="{% url 'loginuser'%}" title="" class="font-medium text-orange-500 transition-all duration-200 hover:text-orange-600 hover:underline">Login</a></p>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </div>
</section>
<a href="/" class="absolute top-3 left-6 hover:bg-blue-400 bg-blue-800 px-2 py-4 text-white rounded-md "> <i class="bi bi-arrow-left"></i> /Home</a>

</body>
</html>
